<h1>
  <img src="gh-pages/docs/images/logo.png" alt="" width="32" />
  Sbt ScalaMetrics
</h1>

<!-- format: off -->
<!-- @formatter:off -->
<div style="display: flex; gap: 5pt; align-items: baseline; justify-content: left;">

[![Release](https://img.shields.io/github/v/release/bitblends/sbt-scalametrics?sort=semver&style=flat&color=darkgreen&labelColor=2f363d&logo=github&logoColor=white)](https://github.com/bitblends/sbt-scalametrics/releases/latest)
[![Maven Central](https://img.shields.io/maven-central/v/com.bitblends/sbt-scalametrics_2.12_1.0?style=flat&color=darkgreen&labelColor=2f363d&logo=Sonatype&logoColor=white)](https://central.sonatype.com/artifact/com.bitblends/sbt-scalametrics_2.12_1.0)
[![CI](https://github.com/bitblends/sbt-scalametrics/actions/workflows/ci.yml/badge.svg)](https://github.com/bitblends/sbt-scalametrics/actions/workflows/ci.yml)
[![License](https://img.shields.io/badge/License-MIT-3?style=flat&color=yellow&labelColor=2f363d&logoColor=white)](LICENSE)

</div>
<!-- format: on -->
<!-- @formatter:on -->

[ScalaMetrics](https://bitblends.github.io/scalametrics/) Sbt plugin is a convenient way to analyze and generate reports
of code metrics for Scala projects. It provides comprehensive analysis at multiple granularity levels: project, package,
file, methods/members and generates a detailed single HTML report file with [Tailwind](https://tailwindcss.com/) CSS
styling and interactive [d3.js](https://d3js.org/) charts and raw JSON and CSV data files. Learn more about ScalaMetrics
library by visiting the [ScalaMetrics Documentation](https://bitblends.github.io/scalametrics/) site.

## Features

- Function level, member level, file level, package level, and project level metrics:
	- Cyclomatic complexity
	- Nesting depth analysis
	- Expression branch density
	- Pattern matching usage
	- Lines of code (LOC) statistics
	- Documentation coverage
	- Parameter and arity analysis (implicit, using, default, vararg)
	- Return type explicitness tracking
	- Inline and implicit usage analysis
- Single HTML report file for an easy way to view the generated metrics
- Raw JSON and CSV data files for further processing
- Supports Scala 2.12.x, 2.13.x, and 3.x.x dialects and multi-module projects

## Example Report

You can find an example HTML report generated by the
plugin [here](https://bitblends.github.io/sbt-scalametrics/example-report/metrics-report.html).

## Usage

Add the plugin to your project's `project/plugins.sbt`:

```scala
addSbtPlugin("com.bitblends" % "sbt-scalametrics" % "1.1.1")
```

### For Flat Projects or Per-Module Analysis

```bash 
# Run without arguments (automatically detects Scala dialect)
sbt metricsReport
```

### For Multi-Module Projects

```bash
# Aggregates all metrics from all modules (automatically detects Scala dialect), works for both multi-module and single-module (flat) projects
sbt metricsReportAggregate
```

This generates a `metrics-report` (or `metrics-report-aggregate`) directory inside the project's `./target/` directory
with an HTML report file `metrics-report.html`, raw JSON data file: `metrics-report-data.json`, and CSV data files:
`metrics-report-files.csv`, `metrics-report-files.csv`, `metrics-report-members.csv`, and `metrics-report-methods.csv`.

### Additional Options

#### Custom Output File Name

```bash
# Specify custom output HTML report file name (without extension)
sbt "metricsReport --output my-metrics-report"
sbt "metricsReportAggregate --output full-project-metrics"
```

#### Exclude Source Directories or Modules

```bash
# Exclude specific source directories/modules
sbt "metricsReport --exclude examples,benchmark"
sbt "metricsReportAggregate --exclude examples,benchmark"

# Exclude by path pattern
sbt "metricsReport --exclude /examples/,/benchmark/"
sbt "metricsReportAggregate --exclude /examples/,/benchmark/"
```

## Documentation

Read the full documentation at the [Sbt ScalaMetrics Documentation](https://bitblends.github.io/sbt-scalametrics/) site
for more details on configuration, data schemas, and usage.

## Contributing

Contributions are welcome! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

## License

Licensed under the MIT License. See [LICENSE](LICENSE) file for details.
